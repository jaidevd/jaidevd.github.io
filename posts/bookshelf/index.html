<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>Organizing a Bookshelf with Multivariate Analysis | Jaidev's Blog</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=http://jaidevd.com/css/main.min.975b1911c008aee6ab5fb42e51274b8268ebcb65dc15bd4a5f69b9eedb485c3e.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-80129098-1','auto'),ga('send','pageview'))</script></head><body><nav><header><div class=site-title><a href=/>Jaidev's Blog</a></div></header><div class=nav-menu><a class="color-link nav-link" href=/about/>About Me</a>
<a class="color-link nav-link" href=/archive/>Archive</a>
<a class="color-link nav-link" href=http://jaidevd.com/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons><a class=social-icon href=mailto:deshpande.jaidev@gmail.com target=_blank rel=noopener title=Email><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M25.2794292 5.59128519 14 16.8707144 2.72057081 5.59128519C3.06733103 5.30237414 3.51336915 5.12857603 4 5.12857603H24c.4866308.0.932669000000001.173798110000001 1.2794292.46270916zM25.9956978 6.99633695C25.998551 7.04004843 26 7.08414302 26 7.12857603V20.871424C26 21.0798433 25.9681197 21.2808166 25.9089697 21.4697335l-7.1933342-7.1933342 7.2800623-7.28006235zM24.9498374 22.6319215C24.6672737 22.7846939 24.3437653 22.871424 24 22.871424H4C3.5268522 22.871424 3.09207889 22.7071233 2.74962118 22.432463l7.34540352-7.3454036 3.8897821 3.8897821L14.1878486 18.7737996l.0151933.0151933 3.4519334-3.4519335 7.2948621 7.2948621zM2.00810114 21.0526627C2.00273908 20.9929669 2 20.9325153 2 20.871424V7.12857603C2 7.08414302 2.00144896 7.04004843 2.00430222 6.99633695L9.03436454 14.0263993l-7.0262634 7.0262634z"/></svg></a><a class=social-icon href=https://twitter.com/jaidevd target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg></a><a class=social-icon href="https://www.youtube.com/playlist?list=PLllKLgiXxcqe3MlAk-6ZrQP82Dr5mgI0d" target=_blank rel=noopener title=YouTube><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M25.9775568 20.4086648C25.6900568 21.4913352 24.8430398 22.343892 23.7673295 22.6332386 21.8177557 23.1590909 14 23.1590909 14 23.1590909s-7.81771307.0-9.76734375-.5258523C3.15704545 22.343892 2.30988068 21.4913352 2.02240483 20.4086648 1.5 18.4464062 1.5 14.3522727 1.5 14.3522727s0-4.0940767.52240483-6.05651986c.28747585-1.08254261 1.13464062-1.93509091 2.21025142-2.22456392C6.18228693 5.54545455 14 5.54545455 14 5.54545455s7.8177557.0 9.7673295.52573437c1.0757103.28947301 1.9227273 1.14202131 2.2102273 2.22456392C26.5 10.258196 26.5 14.3522727 26.5 14.3522727S26.5 18.4464062 25.9775568 20.4086648zm-14.534375-9.773537v7.434304l6.5340909-3.7173295-6.5340909-3.7169745z"/></svg></a><a class=social-icon href=https://github.com/jaidevd target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><script src=http://jaidevd.com/js/main.min.c1aee25a817e9beb1f9c4afd9d62311227a7f5e46720e404dc1dda97281f47f2.js integrity="sha256-wa7iWoF+m+sfnEr9nWIxEien9eRnIOQE3B3alygfR/I=" crossorigin=anonymous></script></footer></nav><div id=content class=content-container><h1 class=post-title>Organizing a Bookshelf with Multivariate Analysis</h1><time>August 27, 2015</time><div><p><p>I have recently moved from Pune to Delhi. I had spent only a year in Pune, having moved there from Mumbai, where I lived for three years. Whenever I move, the bulk of my luggage consists of books and clothes. My stay in Pune was just a transition, so I never bothered to unpack and store all my stuff too carefully. Thus, a corner of my bedroom in my Pune apartment always looked like this:
<img class=article-image src=/posts/bookshelf/before.jpg alt="My first image"></p><p>The actual volume of books that I carried from Pune to Delhi is about twice of what is seen in the picture. My house in Delhi has six bookshelves, three in the living room and three in another room that I&rsquo;ve made into a study. Naturally, I wanted to arrange my nearly 200 books in a manner that would be convenient to access, and such that the arrangement made some thematic sense. For example, I should not have to go to the living room to get one of my books on data analysis, and my partner shouldn&rsquo;t have to keep coming into the study to get one of her novels. Also, books that deal with similar subjects should naturally lie together. Obviously, arraging books semantically and such that they look good on the shelves isn&rsquo;t a data analysis problem as such, and even a haphazard, arbitrary arrangement of books would still work well for most practical purposes, but I still thought making it data driven would be a fun exercise.</p><p>An obvious method was to arrange the books alphabetically, but I rejected that for two reasons. First, there are some books that one identifies by the name of the author instead of by the title (for example, &ldquo;Wes McKinney&rsquo;s book on Pandas&rdquo; is easier for me to remember than &ldquo;Python for Data Analysis&rdquo;). Therefore, the immediate question was whether to sort alphabetically the names of the authors or the titles of the book. Secondly, even if I picked one of these attributes by which to arrange the books, that would make the arrangement look physically very ugly. It would also not ensure that books with similar themes or genres lie together. (I would not have <a href=http://www.amazon.com/Computer-Vision-Modern-Approach-Edition/dp/013608592X><em>Computer Vision: A Modern Approach</em> by Forsyth and Ponce</a> positioned next to <a href=http://www.amazon.com/Day-Jackal-Frederick-Forsyth/dp/0451239377><em>The Day of the Jackal</em> by Fredrick Forsyth</a>)</p><p>I also briefly considered using the Dewey Decimal System, but it became quickly apparent that it is only worthwhile for huge libraries, and sometimes not even then. So after a bit of thinking, I laid down the following rules that the arrangement should follow:</p><ol><li>Books should be arranged by height</li><li>Books by the same author should be positioned next to each other.</li><li>A shelf should house at most two genres of books.</li></ol><p>Since I had six bookshelves, it seemed natural that I should partition titles into six clusters in an unsupervised manner.</p><h2 id=getting-and-preprocessing-the-data>Getting and Preprocessing the Data</h2><p>To perform clustering on the book titles, I started annotating books by the names of their author, their height in millimeters and there genres and subgenres. The resulting dataset is available <a href=https://gist.githubusercontent.com/jaidevd/23aef12e9bf56c618c41/raw/c05e98672b8d52fa0cb94aad80f75eb78342e5d4/books_new.csv>here</a>, and looks somewhat like this:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000;font-weight:700>import</span> <span style=color:#555>pandas</span> <span style=color:#000;font-weight:700>as</span> <span style=color:#555>pd</span>
url <span style=color:#000;font-weight:700>=</span> <span style=color:#d14>&#34;https://gist.githubusercontent.com/jaidevd/23aef12e9bf56c618c41/raw/c05e98672b8d52fa0cb94aad80f75eb78342e5d4/books_new.csv&#34;</span>
df <span style=color:#000;font-weight:700>=</span> pd<span style=color:#000;font-weight:700>.</span>read_csv(url, index_col<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;Title&#39;</span>)
df<span style=color:#000;font-weight:700>.</span>head()</code></pre></div><div><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Author</th><th>Genre</th><th>SubGenre</th><th>Height</th><th>Publisher</th></tr><tr><th>Title</th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>Fundamentals of Wavelets</th><td>Goswami, Jaideva</td><td>tech</td><td>signal_processing</td><td>228</td><td>Wiley</td></tr><tr><th>Data Smart</th><td>Foreman, John</td><td>tech</td><td>data_science</td><td>235</td><td>Wiley</td></tr><tr><th>God Created the Integers</th><td>Hawking, Stephen</td><td>tech</td><td>mathematics</td><td>197</td><td>Penguin</td></tr><tr><th>Superfreakonomics</th><td>Dubner, Stephen</td><td>science</td><td>economics</td><td>179</td><td>HarperCollins</td></tr><tr><th>Orientalism</th><td>Said, Edward</td><td>nonfiction</td><td>history</td><td>197</td><td>Penguin</td></tr></tbody></table></div><p>For convenience, I ignored the first names of the authors. I also only considered the last names of the first author of those books that have multiple authors.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>df[<span style=color:#d14>&#39;Author&#39;</span>] <span style=color:#000;font-weight:700>=</span> df[<span style=color:#d14>&#39;Author&#39;</span>]<span style=color:#000;font-weight:700>.</span>astype(<span style=color:#0086b3>str</span>)<span style=color:#000;font-weight:700>.</span>apply(<span style=color:#000;font-weight:700>lambda</span> x: x<span style=color:#000;font-weight:700>.</span>split(<span style=color:#d14>&#39;,&#39;</span>)[<span style=color:#099>0</span>]<span style=color:#000;font-weight:700>.</span>lower())</code></pre></div><p>The author, genre and subgenre of the books are categorical variables, so they have to be converted into dummy numerical variables first, and then the height attribute has to be added to the resulting dataset.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000;font-weight:700>import</span> <span style=color:#555>numpy</span> <span style=color:#000;font-weight:700>as</span> <span style=color:#555>np</span>
<span style=color:#000;font-weight:700>from</span> <span style=color:#555>sklearn.feature_extraction</span> <span style=color:#000;font-weight:700>import</span> DictVectorizer

<span style=color:#998;font-style:italic># Get dummy vectors for categorical data</span>
authorVect <span style=color:#000;font-weight:700>=</span> DictVectorizer(sparse<span style=color:#000;font-weight:700>=</span><span style=color:#999>False</span>)
dummyAuthors <span style=color:#000;font-weight:700>=</span> authorVect<span style=color:#000;font-weight:700>.</span>fit_transform([<span style=color:#0086b3>dict</span>(author<span style=color:#000;font-weight:700>=</span>f) <span style=color:#000;font-weight:700>for</span> f <span style=color:#000;font-weight:700>in</span> df[<span style=color:#d14>&#39;Author&#39;</span>]])
genreVect <span style=color:#000;font-weight:700>=</span> DictVectorizer(sparse<span style=color:#000;font-weight:700>=</span><span style=color:#999>False</span>)
dummyGenres <span style=color:#000;font-weight:700>=</span> genreVect<span style=color:#000;font-weight:700>.</span>fit_transform([<span style=color:#0086b3>dict</span>(genre<span style=color:#000;font-weight:700>=</span>f) <span style=color:#000;font-weight:700>for</span> f <span style=color:#000;font-weight:700>in</span> df[<span style=color:#d14>&#39;Genre&#39;</span>]])
subgenVect <span style=color:#000;font-weight:700>=</span> DictVectorizer(sparse<span style=color:#000;font-weight:700>=</span><span style=color:#999>False</span>)
dummySubGenres <span style=color:#000;font-weight:700>=</span> subgenVect<span style=color:#000;font-weight:700>.</span>fit_transform([<span style=color:#0086b3>dict</span>(subgen<span style=color:#000;font-weight:700>=</span>f) <span style=color:#000;font-weight:700>for</span> f <span style=color:#000;font-weight:700>in</span> df[<span style=color:#d14>&#39;SubGenre&#39;</span>]])

X <span style=color:#000;font-weight:700>=</span> np<span style=color:#000;font-weight:700>.</span>c_[dummyAuthors, dummyGenres, dummySubGenres]

<span style=color:#998;font-style:italic># Add height to the dataset</span>
X <span style=color:#000;font-weight:700>=</span> np<span style=color:#000;font-weight:700>.</span>c_[X, df[<span style=color:#d14>&#39;Height&#39;</span>]<span style=color:#000;font-weight:700>.</span>values]</code></pre></div><h2 id=analysis-and-visualization>Analysis and Visualization</h2><p>Before the clustering, let&rsquo;s run a basic PCA reduction on the dataset and take a look at the scatterplot. Let&rsquo;s also create a convex hull around the scatter plot and take a look at which book titles make up the vertices of the hull.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000;font-weight:700>import</span> <span style=color:#555>matplotlib.pyplot</span> <span style=color:#000;font-weight:700>as</span> <span style=color:#555>plt</span>
plt<span style=color:#000;font-weight:700>.</span>style<span style=color:#000;font-weight:700>.</span>use(<span style=color:#d14>&#39;ggplot&#39;</span>)


<span style=color:#000;font-weight:700>from</span> <span style=color:#555>sklearn.preprocessing</span> <span style=color:#000;font-weight:700>import</span> StandardScaler
<span style=color:#000;font-weight:700>from</span> <span style=color:#555>sklearn.decomposition</span> <span style=color:#000;font-weight:700>import</span> PCA
<span style=color:#000;font-weight:700>from</span> <span style=color:#555>scipy.spatial</span> <span style=color:#000;font-weight:700>import</span> ConvexHull


<span style=color:#998;font-style:italic># Standard normalization</span>
scaler <span style=color:#000;font-weight:700>=</span> StandardScaler()
X <span style=color:#000;font-weight:700>=</span> scaler<span style=color:#000;font-weight:700>.</span>fit_transform(X)

<span style=color:#998;font-style:italic># Dimensionality reduction</span>
pca <span style=color:#000;font-weight:700>=</span> PCA(n_components<span style=color:#000;font-weight:700>=</span><span style=color:#099>2</span>)
x_red <span style=color:#000;font-weight:700>=</span> pca<span style=color:#000;font-weight:700>.</span>fit_transform(X)


hull <span style=color:#000;font-weight:700>=</span> ConvexHull(x_red)
plt<span style=color:#000;font-weight:700>.</span>figure(figsize<span style=color:#000;font-weight:700>=</span>(<span style=color:#099>15</span>, <span style=color:#099>15</span>))
plt<span style=color:#000;font-weight:700>.</span>scatter(x_red[:, <span style=color:#099>0</span>], x_red[:, <span style=color:#099>1</span>], s<span style=color:#000;font-weight:700>=</span><span style=color:#099>50</span>)
<span style=color:#000;font-weight:700>for</span> vertex <span style=color:#000;font-weight:700>in</span> hull<span style=color:#000;font-weight:700>.</span>vertices:
    plt<span style=color:#000;font-weight:700>.</span>annotate(df<span style=color:#000;font-weight:700>.</span>index[vertex], xy<span style=color:#000;font-weight:700>=</span>x_red[vertex, :])</code></pre></div><p><img src=/img/bookshelf-2.png alt></p><p>At this stage the scatter plot looks like it is making sense. The cluster at the top right seems like the fiction cluster, the one at the top center might be graphic novels and the one at the bottom might be history. There is still some ambiguity, as the plot says nothing about which attributes are varying as we move away from the origin towards the vertices of the hull.</p><p>To examine the variation among the attributes in detail, let&rsquo;s use a biplot superimposed on the scatterplot. Let&rsquo;s also perform the clustering with KMeans, with six centroids, each denoting a shelf.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000;font-weight:700>from</span> <span style=color:#555>sklearn.cluster</span> <span style=color:#000;font-weight:700>import</span> KMeans


km <span style=color:#000;font-weight:700>=</span> KMeans(n_clusters<span style=color:#000;font-weight:700>=</span><span style=color:#099>6</span>, n_jobs<span style=color:#000;font-weight:700>=-</span><span style=color:#099>1</span>)
clusters <span style=color:#000;font-weight:700>=</span> km<span style=color:#000;font-weight:700>.</span>fit_predict(x_red)

xvector <span style=color:#000;font-weight:700>=</span> pca<span style=color:#000;font-weight:700>.</span>components_[<span style=color:#099>0</span>]
yvector <span style=color:#000;font-weight:700>=</span> pca<span style=color:#000;font-weight:700>.</span>components_[<span style=color:#099>1</span>]

xs <span style=color:#000;font-weight:700>=</span> pca<span style=color:#000;font-weight:700>.</span>transform(X)[:,<span style=color:#099>0</span>]
ys <span style=color:#000;font-weight:700>=</span> pca<span style=color:#000;font-weight:700>.</span>transform(X)[:,<span style=color:#099>1</span>]



columns <span style=color:#000;font-weight:700>=</span> df<span style=color:#000;font-weight:700>.</span>Author<span style=color:#000;font-weight:700>.</span>unique()<span style=color:#000;font-weight:700>.</span>tolist() <span style=color:#000;font-weight:700>+</span> \
          df<span style=color:#000;font-weight:700>.</span>Genre<span style=color:#000;font-weight:700>.</span>unique()<span style=color:#000;font-weight:700>.</span>tolist() <span style=color:#000;font-weight:700>+</span> \
          df<span style=color:#000;font-weight:700>.</span>SubGenre<span style=color:#000;font-weight:700>.</span>unique()<span style=color:#000;font-weight:700>.</span>tolist() <span style=color:#000;font-weight:700>+</span> [<span style=color:#d14>&#39;Height&#39;</span>]

plt<span style=color:#000;font-weight:700>.</span>figure(figsize<span style=color:#000;font-weight:700>=</span>(<span style=color:#099>15</span>, <span style=color:#099>15</span>))

<span style=color:#998;font-style:italic># Creating the biplot</span>
mXS, mYS <span style=color:#000;font-weight:700>=</span> xs<span style=color:#000;font-weight:700>.</span>max(), ys<span style=color:#000;font-weight:700>.</span>max()
xVec, yVec <span style=color:#000;font-weight:700>=</span> xvector <span style=color:#000;font-weight:700>*</span> mXS, yvector <span style=color:#000;font-weight:700>*</span> mYS
largeAttrs <span style=color:#000;font-weight:700>=</span> np<span style=color:#000;font-weight:700>.</span>sqrt(xVec <span style=color:#000;font-weight:700>**</span> <span style=color:#099>2</span> <span style=color:#000;font-weight:700>+</span> yVec <span style=color:#000;font-weight:700>**</span> <span style=color:#099>2</span>)
maxAttrs <span style=color:#000;font-weight:700>=</span> np<span style=color:#000;font-weight:700>.</span>argsort(largeAttrs)[::<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>][:<span style=color:#099>10</span>]
<span style=color:#000;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#0086b3>range</span>(<span style=color:#099>5</span>):
    plt<span style=color:#000;font-weight:700>.</span>arrow(<span style=color:#099>0</span>, <span style=color:#099>0</span>, <span style=color:#000;font-weight:700>-</span>xvector[maxAttrs[i]]<span style=color:#000;font-weight:700>*</span><span style=color:#0086b3>max</span>(xs), yvector[maxAttrs[i]]<span style=color:#000;font-weight:700>*</span><span style=color:#0086b3>max</span>(ys),
              color<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;r&#39;</span>, width<span style=color:#000;font-weight:700>=</span><span style=color:#099>0.0005</span>, head_width<span style=color:#000;font-weight:700>=</span><span style=color:#099>0.0025</span>)
    plt<span style=color:#000;font-weight:700>.</span>text(<span style=color:#000;font-weight:700>-</span>xvector[maxAttrs[i]]<span style=color:#000;font-weight:700>*</span><span style=color:#0086b3>max</span>(xs)<span style=color:#000;font-weight:700>*</span><span style=color:#099>1.2</span>, yvector[maxAttrs[i]]<span style=color:#000;font-weight:700>*</span><span style=color:#0086b3>max</span>(ys)<span style=color:#000;font-weight:700>*</span><span style=color:#099>1.2</span>,
             columns[maxAttrs[i]], color<span style=color:#000;font-weight:700>=</span><span style=color:#d14>&#39;r&#39;</span>)

plt<span style=color:#000;font-weight:700>.</span>scatter(xs, ys, c<span style=color:#000;font-weight:700>=</span>clusters, s<span style=color:#000;font-weight:700>=</span><span style=color:#099>50</span>)

<span style=color:#000;font-weight:700>for</span> vertex <span style=color:#000;font-weight:700>in</span> hull<span style=color:#000;font-weight:700>.</span>vertices:
    plt<span style=color:#000;font-weight:700>.</span>annotate(df<span style=color:#000;font-weight:700>.</span>index[vertex], xy<span style=color:#000;font-weight:700>=</span>x_red[vertex, :])</code></pre></div><p><img src=/img/bookshelf-3.png alt></p><p>The lines denote how the different attributes of the book vary among the titles, and the six colored clusters are how I arranged my books among the six shelves. After the arragement dictated by the clustering output, they looked a bit better:</p><p><img class=article-image src=/posts/bookshelf/bookshelf-4.jpeg alt="My first image">
<img class=article-image src=/posts/bookshelf/bookshelf-5.jpeg alt="My first image"></p><p>I might have gone quite overboard with personal data analytics with this exercise, but at least I learnt how to make biplots. The kitchen is next.</p></p></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//brocasbrain.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/personal>#personal</a>
<a class=tag href=/tags/analytics>#analytics</a>
<a class=tag href=/tags/pca>#PCA</a>
<a class=tag href=/tags/dataviz>#dataviz</a></div><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></div><footer class=footer-mobile><div class=social-icons><a class=social-icon href=mailto:deshpande.jaidev@gmail.com target=_blank rel=noopener title=Email><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M25.2794292 5.59128519 14 16.8707144 2.72057081 5.59128519C3.06733103 5.30237414 3.51336915 5.12857603 4 5.12857603H24c.4866308.0.932669000000001.173798110000001 1.2794292.46270916zM25.9956978 6.99633695C25.998551 7.04004843 26 7.08414302 26 7.12857603V20.871424C26 21.0798433 25.9681197 21.2808166 25.9089697 21.4697335l-7.1933342-7.1933342 7.2800623-7.28006235zM24.9498374 22.6319215C24.6672737 22.7846939 24.3437653 22.871424 24 22.871424H4C3.5268522 22.871424 3.09207889 22.7071233 2.74962118 22.432463l7.34540352-7.3454036 3.8897821 3.8897821L14.1878486 18.7737996l.0151933.0151933 3.4519334-3.4519335 7.2948621 7.2948621zM2.00810114 21.0526627C2.00273908 20.9929669 2 20.9325153 2 20.871424V7.12857603C2 7.08414302 2.00144896 7.04004843 2.00430222 6.99633695L9.03436454 14.0263993l-7.0262634 7.0262634z"/></svg></a><a class=social-icon href=https://twitter.com/jaidevd target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg></a><a class=social-icon href="https://www.youtube.com/playlist?list=PLllKLgiXxcqe3MlAk-6ZrQP82Dr5mgI0d" target=_blank rel=noopener title=YouTube><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M25.9775568 20.4086648C25.6900568 21.4913352 24.8430398 22.343892 23.7673295 22.6332386 21.8177557 23.1590909 14 23.1590909 14 23.1590909s-7.81771307.0-9.76734375-.5258523C3.15704545 22.343892 2.30988068 21.4913352 2.02240483 20.4086648 1.5 18.4464062 1.5 14.3522727 1.5 14.3522727s0-4.0940767.52240483-6.05651986c.28747585-1.08254261 1.13464062-1.93509091 2.21025142-2.22456392C6.18228693 5.54545455 14 5.54545455 14 5.54545455s7.8177557.0 9.7673295.52573437c1.0757103.28947301 1.9227273 1.14202131 2.2102273 2.22456392C26.5 10.258196 26.5 14.3522727 26.5 14.3522727S26.5 18.4464062 25.9775568 20.4086648zm-14.534375-9.773537v7.434304l6.5340909-3.7173295-6.5340909-3.7169745z"/></svg></a><a class=social-icon href=https://github.com/jaidevd target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><div class=footer-mobile-links><p><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy theme</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p></div><script src=http://jaidevd.com/js/main.min.c1aee25a817e9beb1f9c4afd9d62311227a7f5e46720e404dc1dda97281f47f2.js integrity="sha256-wa7iWoF+m+sfnEr9nWIxEien9eRnIOQE3B3alygfR/I=" crossorigin=anonymous></script></footer></body></html>